!function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};"object"===("undefined"==typeof exports?"undefined":n(exports))?module.exports=t():"function"==typeof define&&define.amd?define(function(){return t()}):e.datepicker=t()}(this,function(){"use strict";function e(e,r){var s="string"==typeof e?document.querySelector(e):e,i=s.parentElement;r=t(r||n(),s,e);var a=document.createElement("div"),c=r,u=c.startDate,d=c.dateSelected,f=s===document.body||s===document.querySelector("html"),p={el:s,parent:i,nonInput:"INPUT"!==s.nodeName,noPosition:f,position:!f&&r.position,startDate:u,dateSelected:d,minDate:r.minDate,maxDate:r.maxDate,noWeekends:!!r.noWeekends,calendar:a,currentMonth:(u||d).getMonth(),currentMonthName:(r.months||S)[(u||d).getMonth()],currentYear:(u||d).getFullYear(),setDate:h,remove:m,onSelect:r.onSelect,onShow:r.onShow,onHide:r.onHide,onMonthChange:r.onMonthChange,formatter:r.formatter,months:r.months,days:r.days,disableMobile:r.disableMobile,isMobile:"ontouchstart"in window};return d&&l(s,p),a.classList.add("qs-datepicker"),a.classList.add("qs-hidden"),q.push(s),o(u||d,p),v(a,p),b.forEach(function(e){window.addEventListener(e,y.bind(p))}),"static"===getComputedStyle(i).position&&(i.style.position="relative"),i.appendChild(a),p}function t(e,t){if(!t)throw new Error("An invalid selector or non-DOM node has been provided.");if(q.includes(t))throw new Error("A datepicker already exists on that element.");var n=e.position,o=e.maxDate,s=e.minDate,i=e.dateSelected,a=e.formatter,c=e.customMonths,l=e.customDays;if(n){if(!["tr","tl","br","bl"].some(function(e){return n===e}))throw new Error('"options.position" needs to be one of the following: tl, tr, bl, or br.');e.position=r(n)}else e.position=r("bl");if(["startDate","dateSelected","minDate","maxDate"].forEach(function(t){if(e[t]){if(!f(e[t])||isNaN(+e[t]))throw new TypeError('"options.'+t+'" needs to be a valid JavaScript Date object.');e[t]=p(e[t])}}),e.startDate=e.startDate||e.dateSelected||p(new Date),e.formatter="function"==typeof a?a:null,o<s)throw new Error('"maxDate" in options is less than "minDate".');if(i){if(s>i)throw new Error('"dateSelected" in options is less than "minDate".');if(o<i)throw new Error('"dateSelected" in options is greater than "maxDate".')}return["onSelect","onShow","onHide","onMonthChange"].forEach(function(t){e[t]="function"==typeof e[t]&&e[t]}),[c,l].forEach(function(t,n){if(void 0!==t){var r=['"customMonths" must be an array with 12 strings.','"customDays" must be an array with 7 strings.'];if(["[object Array]"!=={}.toString.call(t),t.length!==(n?7:12),t.some(function(e){return"string"!=typeof e})].some(function(e){return e}))throw new Error(r[n]);e[n?"days":"months"]=t}}),e}function n(){return{startDate:p(new Date),position:"bl"}}function r(e){var t={};return t[g[e[0]]]=1,t[g[e[1]]]=1,t}function o(e,t){var n=t.calendar,r=s(e,t),o=i(e,t),c=a(t);n.innerHTML=r+o+c}function s(e,t){return'\n      <div class="qs-controls">\n        <div class="qs-arrow qs-left"></div>\n        <div class="qs-month-year">\n          <span class="qs-month">'+(t.months||S)[e.getMonth()]+'</span>\n          <span class="qs-year">'+e.getFullYear()+'</span>\n        </div>\n        <div class="qs-arrow qs-right"></div>\n      </div>\n    '}function i(e,t){var n=t.minDate,r=t.maxDate,o=t.dateSelected,s=t.currentYear,i=t.currentMonth,a=t.noWeekends,c=new Date,l=c.toJSON().slice(0,7)===e.toJSON().slice(0,7),u=new Date(new Date(e).setDate(1)),d=u.getDay();u.setMonth(u.getMonth()+1),u.setDate(0);var h=u.getDate(),f=[],p=7*((d+h)/7|0);p+=(d+h)%7?7:0;for(var m=1;m<=p;m++){var v=(t.days||w)[(m-1)%7],y=m-d,q="",b='<span class="qs-num">'+y+"</span>",S=new Date(s,i,y),g=y<1||y>h;if(g)q="qs-empty",b="";else{var D=n&&S<n||r&&S>r,M=t.days||w,E=M[6],L=M[0],N=v===E||v===L,x=l&&!D&&y===c.getDate();D=D||a&&N,q=D?"qs-disabled":x?"qs-current":""}+S!=+o||g||(q+=" qs-active"),f.push('<div class="qs-square qs-num '+v+" "+q+'">'+b+"</div>")}var C=(t.days||w).map(function(e){return'<div class="qs-square qs-day">'+e+"</div>"}).concat(f);if(C.length%7!=0){throw new Error("Calendar not constructed properly. The # of squares should be a multiple of 7.")}return C.unshift('<div class="qs-squares">'),C.push("</div>"),C.join("")}function a(e){return'\n      <div class="qs-overlay qs-hidden">\n        <div class="qs-close">&#10005;</div>\n        <input type="number" class="qs-overlay-year" placeholder="4-digit year" />\n        <div class="qs-submit qs-disabled">Submit</div>\n      </div>\n    '}function c(e,t){var n=t.currentMonth,r=t.currentYear,o=t.calendar,s=t.el,i=t.onSelect,a=o.querySelector(".qs-active"),c=e.textContent;t.dateSelected=new Date(r,n,c),a&&a.classList.remove("qs-active"),e.classList.add("qs-active"),l(s,t),o.classList.add("qs-hidden"),i&&t.onSelect(t)}function l(e,t){if(!t.nonInput)return t.formatter?t.formatter(e,t.dateSelected):void(e.value=t.dateSelected.toDateString())}function u(e,t,n){n?t.currentYear=n:(t.currentMonth+=e.contains("qs-right")?1:-1,12===t.currentMonth?(t.currentMonth=0,t.currentYear++):-1===t.currentMonth&&(t.currentMonth=11,t.currentYear--)),o(new Date(t.currentYear,t.currentMonth,1),t),t.currentMonthName=(t.months||S)[t.currentMonth],t.onMonthChange&&n&&t.onMonthChange(t)}function d(e){if(!e.noPosition){var t=e.el,n=e.calendar,r=e.position,o=e.parent,s=r.top,i=r.right,a=o.getBoundingClientRect(),c=t.getBoundingClientRect(),l=n.getBoundingClientRect(),u=c.top-a.top+o.scrollTop,d="\n      top:"+(u-(s?l.height:-1*c.height))+"px;\n      left:"+(c.left-a.left+(i?c.width-l.width:0))+"px;\n    ";n.setAttribute("style",d)}}function h(e){if(!f(e))throw new TypeError("`setDate` needs a JavaScript Date object.");e=p(e),this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth(),this.currentMonthName=(this.months||S)[e.getMonth()],this.dateSelected=e,l(this.el,this),o(e,this)}function f(e){return"[object Date]"==={}.toString.call(e)}function p(e){return new Date(e.toDateString())}function m(){var e=this.calendar,t=this.observer,n=this.parent;b.forEach(function(e){window.removeEventListener(e,y)}),e.remove(),t.disconnect(),e.hasOwnProperty("parentStyle")&&(n.style.position="");var r=q.indexOf(this.el);r>-1&&q.splice(r,1)}function v(e,t){t.observer=new MutationObserver(function(e,n){e[0].oldValue.includes("qs-hidden")?(d(t),t.onShow&&t.onShow(t)):t.onHide&&t.onHide(t)}),t.observer.observe(e,{attributes:1,attributeFilter:["class"],attributeOldValue:1})}function y(e){function t(t){var o=t.calendar,s=l.classList,i=o.querySelector(".qs-month-year"),d=s.contains("qs-close");if(s.contains("qs-num")){var h="SPAN"===l.nodeName?l.parentNode:l;!["qs-disabled","qs-active","qs-empty"].some(function(e){return h.classList.contains(e)})&&c(h,t)}else if(s.contains("qs-arrow"))u(s,t);else if(a.includes(i)||d)n(o,d,t);else if(l.classList.contains("qs-submit")){var f=o.querySelector(".qs-overlay-year");r(e,f,t)}}function n(e,t,n){[".qs-overlay",".qs-controls",".qs-squares"].forEach(function(t,n){e.querySelector(t).classList.toggle(n?"qs-blur":"qs-hidden")});var r=e.querySelector(".qs-overlay-year");t?r.value="":r.focus()}function r(e,t,n){var r=isNaN((new Date).setFullYear(t.value||void 0));if(13===e.which||"click"===e.type){if(r||t.classList.contains("qs-disabled"))return;u(null,n,t.value)}else{n.calendar.querySelector(".qs-submit").classList[r?"add":"remove"]("qs-disabled")}}if(!e.path){for(var o=e.target,s=[];o!==document;)s.push(o),o=o.parentNode;e.path=s}var i=e.type,a=e.path,l=e.target;if(!this.isMobile||!this.disableMobile){var d=this.calendar.classList,h=d.contains("qs-hidden"),f=a.includes(this.calendar);if("keyup"===i){var p=this.calendar.querySelector(".qs-overlay");if(13===e.which&&!p.classList.contains("qs-hidden"))return r(e,l,this);if(27===e.which)return n(this.calendar,!0,this);if(9!==e.which)return}if("focusin"===i)return l===this.el&&d.remove("qs-hidden");this.noPosition?f?t(this):d.toggle("qs-hidden"):h?l===this.el&&d.remove("qs-hidden"):"click"===i&&f?t(this):"input"===i?r(e,l,this):l!==this.el&&d.add("qs-hidden")}}var q=[],b=["click","focusin","keyup","input"],w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],S=["January","February","March","April","May","June","July","August","September","October","November","December"],g={t:"top",r:"right",b:"bottom",l:"left"};return e});