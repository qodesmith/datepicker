!function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};"object"===("undefined"==typeof exports?"undefined":n(exports))?module.exports=t():"function"==typeof define&&define.amd?define(function(){return t()}):e.datepicker=t()}(this,function(){"use strict";function e(e,a){var s=e.split?document.querySelector(e):e,r=t(a||n(),s,e),i=s.parentElement,c=document.createElement("div"),d=r.startDate,u=r.dateSelected,y=s===document.body||s===document.querySelector("html"),v={el:s,parent:i,nonInput:"INPUT"!==s.nodeName,noPosition:y,position:!y&&r.position,startDate:d,dateSelected:u,disabledDates:r.disabledDates,minDate:r.minDate,maxDate:r.maxDate,noWeekends:!!r.noWeekends,weekendIndices:r.weekendIndices,calendar:c,currentMonth:(d||u).getMonth(),currentMonthName:(r.months||S)[(d||u).getMonth()],currentYear:(d||u).getFullYear(),setDate:h,reset:f,remove:p,onSelect:r.onSelect,onShow:r.onShow,onHide:r.onHide,onMonthChange:r.onMonthChange,formatter:r.formatter,months:r.months||S,days:r.customDays||w,startDay:r.startDay,overlayPlaceholder:r.overlayPlaceholder||"4-digit year",overlayButton:r.overlayButton||"Submit",disableYearOverlay:r.disableYearOverlay,disableMobile:r.disableMobile,isMobile:"ontouchstart"in window};return u&&l(s,v),c.classList.add("qs-datepicker"),c.classList.add("qs-hidden"),b.push(s),o(d||u,v),g.forEach(function(e){window.addEventListener(e,D.bind(v))}),"static"===getComputedStyle(i).position&&(i.style.position="relative"),i.appendChild(c),v}function t(e,t){var n=Object.assign({},e);if(b.includes(t))throw"A datepicker already exists on that element.";var o=n.position,s=n.maxDate,r=n.minDate,i=n.dateSelected,c=n.formatter,l=n.customMonths,d=n.customDays,u=n.overlayPlaceholder,h=n.overlayButton,f=n.startDay,p=n.disabledDates,m=+v(i);if(n.disabledDates=(p||[]).map(function(e){if(!y(e))throw'You supplied an invalid date to "options.disabledDates".';if(+v(e)===m)throw'"disabledDates" cannot contain the same date as "dateSelected".';return+v(e)}),o){if(!["tr","tl","br","bl","c"].some(function(e){return o===e}))throw'"options.position" must be one of the following: tl, tr, bl, br, or c.';n.position=a(o)}else n.position=a("bl");if(["startDate","dateSelected","minDate","maxDate"].forEach(function(e){if(n[e]){if(!y(n[e])||isNaN(+n[e]))throw'"options.'+e+'" needs to be a valid JavaScript Date object.';n[e]=v(n[e])}}),n.startDate=v(n.startDate||n.dateSelected||new Date),n.formatter="function"==typeof c?c:null,s<r)throw'"maxDate" in options is less than "minDate".';if(i){if(r>i)throw'"dateSelected" in options is less than "minDate".';if(s<i)throw'"dateSelected" in options is greater than "maxDate".'}if(["onSelect","onShow","onHide","onMonthChange"].forEach(function(e){n[e]="function"==typeof n[e]&&n[e]}),[l,d].forEach(function(e,t){if(e){var a=['"customMonths" must be an array with 12 strings.','"customDays" must be an array with 7 strings.'];if("[object Array]"!=={}.toString.call(e)||e.length!==(t?7:12)||e.some(function(e){return"string"!=typeof e}))throw a[t];n[t?"days":"months"]=e}}),void 0!==f&&+f&&+f>0&&+f<7){var q=(n.customDays||w).slice(),D=q.splice(0,f);n.customDays=q.concat(D),n.startDay=+f,n.weekendIndices=[q.length-1,q.length]}else n.startDay=0,n.weekendIndices=[6,0];return[u,h].forEach(function(e,t){e&&e.split&&(t?n.overlayButton=e:n.overlayPlaceholder=e)}),n}function n(){return{startDate:v(new Date),position:"bl"}}function a(e){var t={};return t[M[e[0]]]=1,"c"===e?t:(t[M[e[1]]]=1,t)}function o(e,t){var n=s(e,t),a=r(e,t),o=i(t);t.calendar.innerHTML=n+a+o}function s(e,t){return'\n      <div class="qs-controls">\n        <div class="qs-arrow qs-left"></div>\n        <div class="qs-month-year">\n          <span class="qs-month">'+t.months[e.getMonth()]+'</span>\n          <span class="qs-year">'+e.getFullYear()+'</span>\n        </div>\n        <div class="qs-arrow qs-right"></div>\n      </div>\n    '}function r(e,t){var n=t.minDate,a=t.maxDate,o=t.dateSelected,s=t.currentYear,r=t.currentMonth,i=t.noWeekends,c=t.days,l=t.disabledDates,d=t.startDay,u=t.weekendIndices,h=new Date,f=s===h.getFullYear()&&r===h.getMonth(),y=new Date(new Date(e).setDate(1)),p=y.getDay()-d,m=p<0?7:0;y.setMonth(y.getMonth()+1),y.setDate(0);var q=y.getDate(),D=[],b=m+7*((p+q)/7|0);b+=(p+q)%7?7:0,0!==d&&0===p&&(b+=7);for(var g=1;g<=b;g++){var w=(g-1)%7,S=c[w],M=g-(p>=0?p:7+p),L=new Date(s,r,M),Y=M<1||M>q,k="",x='<span class="qs-num">'+M+"</span>";if(Y)k="qs-empty",x="";else{var N=n&&L<n||a&&L>a||l.includes(+v(L)),C=u.includes(w),P=f&&!N&&M===h.getDate();N=N||i&&C,k=N?"qs-disabled":P?"qs-current":""}+L!=+o||Y||(k+=" qs-active"),D.push('<div class="qs-square qs-num '+S+" "+k+'">'+x+"</div>")}var E=c.map(function(e){return'<div class="qs-square qs-day">'+e+"</div>"}).concat(D);if(E.length%7!=0)throw"Calendar not constructed properly. The # of squares should be a multiple of 7.";return E.unshift('<div class="qs-squares">'),E.push("</div>"),E.join("")}function i(e){return'\n      <div class="qs-overlay qs-hidden">\n        <div class="qs-close">&#10005;</div>\n        <input type="number" class="qs-overlay-year" placeholder="'+e.overlayPlaceholder+'" />\n        <div class="qs-submit qs-disabled">'+e.overlayButton+"</div>\n      </div>\n    "}function c(e,t){var n=t.currentMonth,a=t.currentYear,o=t.calendar,s=t.el,r=t.onSelect,i=o.querySelector(".qs-active"),c=e.textContent;t.dateSelected=new Date(a,n,c),i&&i.classList.remove("qs-active"),e.classList.add("qs-active"),l(s,t),m(t),r&&r(t)}function l(e,t){if(!t.nonInput)return t.formatter?t.formatter(e,t.dateSelected,t):void(e.value=t.dateSelected.toDateString())}function d(e,t,n){n?t.currentYear=n:(t.currentMonth+=e.contains("qs-right")?1:-1,12===t.currentMonth?(t.currentMonth=0,t.currentYear++):-1===t.currentMonth&&(t.currentMonth=11,t.currentYear--)),o(new Date(t.currentYear,t.currentMonth,1),t),t.currentMonthName=t.months[t.currentMonth],t.onMonthChange&&t.onMonthChange(t)}function u(e){if(!e.noPosition){var t=e.el,n=e.calendar,a=e.position,o=e.parent,s=a.top,r=a.right;if(a.centered)return n.classList.add("qs-centered");var i=o.getBoundingClientRect(),c=t.getBoundingClientRect(),l=n.getBoundingClientRect(),d=c.top-i.top+o.scrollTop,u="\n      top:"+(d-(s?l.height:-1*c.height))+"px;\n      left:"+(c.left-i.left+(r?c.width-l.width:0))+"px;\n    ";n.setAttribute("style",u)}}function h(e,t){if(!y(e))throw"`setDate` needs a JavaScript Date object.";e=v(e),this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth(),this.currentMonthName=this.months[e.getMonth()],this.dateSelected=t?void 0:e,!t&&l(this.el,this),o(e,this),t&&(this.el.value="")}function f(){this.setDate(this.startDate,!0)}function y(e){return["[object Date]"==={}.toString.call(e),"Invalid Date"!==e.toString()].every(Boolean)}function v(e){return e?new Date(e.toDateString()):e}function p(){var e=this.calendar,t=this.parent,n=this.el;g.forEach(function(e){window.removeEventListener(e,D)}),e.remove(),e.hasOwnProperty("parentStyle")&&(t.style.position=""),b=b.filter(function(e){return e!==n})}function m(e){e.calendar.classList.add("qs-hidden"),e.onHide&&e.onHide(e)}function q(e){e.calendar.classList.remove("qs-hidden"),u(e),e.onShow&&e.onShow(e)}function D(e){function t(t){var o=t.calendar,r=s.classList,i=o.querySelector(".qs-month-year"),u=r.contains("qs-close");if(r.contains("qs-num")){var h="SPAN"===s.nodeName?s.parentNode:s;!["qs-disabled","qs-active","qs-empty"].some(function(e){return h.classList.contains(e)})&&c(h,t)}else if(r.contains("qs-arrow"))d(r,t);else if(l||!i.contains(s)&&!u){if(s.classList.contains("qs-submit")){var f=o.querySelector(".qs-overlay-year");a(e,f,t)}}else n(o,u,t)}function n(e,t,n){[".qs-overlay",".qs-controls",".qs-squares"].forEach(function(t,n){e.querySelector(t).classList.toggle(n?"qs-blur":"qs-hidden")});var a=e.querySelector(".qs-overlay-year");t?a.value="":a.focus()}function a(e,t,n){var a=isNaN((new Date).setFullYear(t.value||void 0));if(13===e.which||"click"===e.type){if(a||t.classList.contains("qs-disabled"))return;d(null,n,t.value)}else{n.calendar.querySelector(".qs-submit").classList[a?"add":"remove"]("qs-disabled")}}if(!this.isMobile||!this.disableMobile){var o=e.type,s=e.target,r=this.calendar,i=this.el,l=this.disableYearOverlay,u=r.classList,h=u.contains("qs-hidden"),f=r.contains(s);if("keydown"===o){var y=r.querySelector(".qs-overlay"),v=!y.classList.contains("qs-hidden");if(13===e.which&&v)return e.stopPropagation(),a(e,s,this);if(27===e.which&&v)return n(r,!0,this);if(9!==e.which)return}if("focusin"===o)return s===i&&q(this);this.noPosition?f?t(this):h?q(this):m(this):h?s===i&&q(this):"click"===o&&f?t(this):"input"===o?a(e,s,this):s!==i&&m(this)}}Array.prototype.includes||(Array.prototype.includes=function(e){return this.reduce(function(t,n){return t||n===e},!1)});var b=[],g=["click","focusin","keydown","input"],w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],S=["January","February","March","April","May","June","July","August","September","October","November","December"],M={t:"top",r:"right",b:"bottom",l:"left",c:"centered"};return e});